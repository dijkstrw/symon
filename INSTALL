Installation notes
==================

Priviledges
===========
monmux needs read and write access to it's rrdfiles.

monitoring needs:
cpu, if, mem    - mon can run as nobody
pf              - mon needs r/w on /dev/pf
io              - probe is kvm, mon needs kmem. Note that this probe is 
                  disabled in the standard build.

mon2web is a php4 application and needs access to the rrdfiles. Note that
mon2web interprets the url for graphing parameters. It should never be exposed
to untrusted users.

Real quick 
==========
make && make install && vi /etc/monmux.conf /etc/mon.conf && 
	~mon/monmux/c_monrrds.sh all && 
	/usr/local/libexec/monmux && 
	/usr/local/libexec/mon

or grab the port and do
make package
pkg_add mon-monitor-version.tgz on all monitored hosts
pkg_add mon-mux-version.tgz on the loghost
pkg_add mon-web-version.tgz on the loghost

Less quick, but more verbose
============================
- Install rrdtool. cd /usr/ports/net/rrdtool && make install should do the
  trick.

- Check Makefile.inc for settings. Things to watch out for are

     + PREFIX = Where does the installation tree start. Defaults to
                '/usr/local'.

     + BINDIR = Where should the daemons be put, relative to $PREFIX. Defaults
                to 'libexec'.

     + MANDIR = Where should the manuals be installed, relative to
                $PREFIX. Defaults to 'man'.

     + SHRDIR = Where are the example configurations to be installed. Defaults
                to 'share/mon'.

- Decide if you want to monitor disk usage. Define KVM as an environment
  variable before you run make if you do. Note: the monitor will be built with
  kmem priviledges. This is a bad thing.

- Run make && make install

- Create an '/etc/mon.conf'. Note that there is an example configuration in
  $PREFIX/$SHRDIR. 

- Create a monmux.conf on the gatherer host. You can specify alternative
  locations than '/etc/monmux.conf' using 'monmux -f <monmux.conf>'.

- Create the rrd files where the incoming mon data is to be
  stored. $PREFIX/$SHRDIR/c_monrrds.sh is your friend. Note that 'mon2web'
  expects an '.../machine/*.rrd' style directory structure.

- Fire up mon, monmux. Check system logs for any failures.

- Only if you need the webinterface: mon2web is installed in
  $PREFIX/$SHRDIR/. Copy the files to a convenient apache directory and modify
  the mon2web/datasources.inc to reflect your filelocations. Note that it uses
  php, so you may need to (cd /usr/ports/www/php4; make install).

Installing mon on many machines
===============================

- Grab the port files, these are also included in the full source package under
  ~mon/ports/mon.

- cd ~mon/ports/mon
  make package

- The binary packages can be found at 
  /usr/ports/packages/<arch>/All/mon-{monitor|mux|web}-version.tgz

- It makes sense to transfer the mon-monitor-version.tgz to other machines and
  install by pkg_add it. The other 2 packages (mux and web) are the gatherer and
  web frontend. Chances are you want these on your loghost only.

This package is an OpenBSD application. You might be able to make monmux and
mon2web run on POSIX compliant unixes, but the monitoring application itself
(mon) is OpenBSD specific.

Willem Dijkstra <wpd@xs4all.nl>

$Id: INSTALL,v 1.5 2002/09/13 07:42:50 dijkstra Exp $

