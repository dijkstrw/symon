Installation notes
==================

Priviledges
===========
symux needs read and write access to it's rrdfiles.

symon needs:
cpu, debug, if, io, mbuf, mem, proc, sensor - symon can run as nobody
pf                                          - symon needs r/w on /dev/pf

Real quick
==========
make && make install && vi /etc/symux.conf /etc/symon.conf &&
	~symon/symux/c_smrrds.sh all &&
	/usr/local/libexec/symux &&
	useradd _symon
	/usr/local/libexec/symon

or grab the port and do
make package
pkg_add symon-mon-version.tgz on all monitored hosts
pkg_add symon-mux-version.tgz on the loghost

Install the seperate syweb package to show the data stored in the rrd files.

Less quick, but more verbose
============================
- Install rrdtool where you want to run the gatherer.
	cd /usr/ports/net/rrdtool && make install

- Building by hand: Check Makefile.inc for settings. Things to watch out for
  are:

     + PREFIX = Where does the installation tree start. Defaults to
                '/usr/local'.

     + BINDIR = Where should the daemons be put, relative to $PREFIX. Defaults
                to 'libexec'.

     + MANDIR = Where should the manuals be installed, relative to
                $PREFIX. Defaults to 'man'.

     + SHRDIR = Where are the example configurations to be installed. Defaults
                to 'share/symon'.

   Run make && make install

- Building from the port:
	cd ~symon/ports/symon or cd /usr/ports/sysutils/symon
	make package

	cd /usr/ports/packages/$ARCH/All/
	pkg_add symon-mon-version.tgz               on monitored hosts
	pkg_add symon-mux-version.tgz               on the loghost | gatherer

- Create an '/etc/symon.conf' for each monitored host and one symux.conf for
  the gatherer host. See the manual pages on how to specify alternative
  configuration file locations, if necessary. Note that there are example
  configurations for both in $PREFIX/$SHRDIR.

- Create the rrd files where the incoming symon data is to be
  stored. $PREFIX/$SHRDIR/c_smrrds.sh is your friend. Note that syweb expects
  an '.../machine/*.rrd' style directory structure somewhere under /var/www.

- Fire up symon, symux. Check system logs for any failures.

- Only if you need the webinterface: download and install syweb.

Getting measurements without the web
====================================

The client directory contains a perl module 'SymuxClient.pm' that can be used
to read measurements as they come in at the symux host. A sample Perl program
called 'getsymonitem.pl' shows how to use the module.

Example:

hoard$ getsymonitem.pl 127.0.0.1 2100 127.0.0.1 "cpu(0)" "idle"
93.40

Historical data can be gathered using rrdfetch(1) from symux's rrd files.

Portability
===========

This package is an OpenBSD application. You might be able to make symux and
syweb run on POSIX compliant unixes, but the monitoring application itself
(symon) is OpenBSD specific.

Willem Dijkstra - wpd@xs4all.nl

$Id: INSTALL,v 1.12 2003/12/20 16:30:44 dijkstra Exp $

